<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<title>emulator</title>
</head>

<body>
	<input type="file" id="file_selector" />
	<canvas id="canvas" style="width: 400px;height: 400px;"></canvas>
	<script src="gameboy_lib.js"></script>
	<script>
		Rust.gameboy_lib.then(function (emulator) {
			document.getElementById("file_selector")
				.addEventListener("change", function () {
					var reader = new FileReader();
					reader.onload = function () {
						var arraybuffer = this.result;
						var bytes = new Uint8Array(arraybuffer);
						var rom = Array.prototype.slice.call(bytes);
						emulator.start(rom);
					};

					reader.readAsArrayBuffer(this.files[0]);
				});
		});
	</script>
</body>

</html>